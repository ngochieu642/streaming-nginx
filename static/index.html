<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Live Streaming</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/video.js/5.10.2/alt/video-js-cdn.css"
      rel="stylesheet"
    />
    <script src="https://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>
  </head>
  <body>
    <div>
      <h1>Live Streaming using NGINX (Prebuilt RMTP)</h1>
      <p>
        <ul>
          <li>
            Camera -> RTSP -> RMTP -> HLS -> HTML
          </li>
          <li>
            ffmpeg: convert RTSP to RTMP
          </li>
          <li>
            nginx-rmtp pluginL RMTP to HLS
          </li>
        </ul>
      </p>
      <input
        type="text"
        id="url"
        style="width:100%"
        value="http://localhost:8080/hls/stream.m3u8"
      />
      <input type="button" id="btn" value="play" />

      <video
        id="video"
        class="video-js vjs-default-skin vjs-live"
        height="360"
        width="640"
        controls
        preload="none"
      >
        <source src="" type="video/mp4" />
      </video>
    </div>

    <script src="https://vjs.zencdn.net/7.7.5/video.js"></script>
    <script>
      let videoPlayer = document.getElementById("video");
      let playBtn = document.getElementById("btn");
      let urlInput = document.getElementById("url");
      let player = videojs("video");

      // http://localhost:8080/hls/stream.m3u8

      playBtn.addEventListener("click", function() {
        player.src({
          src:
            urlInput.value,
          type: "application/x-mpegURL"
        });
      });

      player.play();
    </script>
  </body>
</html>
